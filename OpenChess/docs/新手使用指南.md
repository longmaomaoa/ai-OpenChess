# 中国象棋智能对弈助手 - 新手使用指南

## 🎯 项目简介

这是一个基于计算机视觉和AI技术的中国象棋智能对弈助手，能够：
- 🔍 **实时识别**：自动识别屏幕上的象棋棋盘和棋子
- 🤖 **AI分析**：提供走法建议、胜率计算和局面分析
- 👀 **对手监控**：自动检测对手走法并实时响应
- 🎛️ **区域选择**：支持多棋盘同时使用的场景

> **重要说明**：本程序仅供学习和辅助分析使用，请遵守在线象棋平台的使用条款。

## 🚀 快速开始

### 第一步：环境安装

1. **运行自动安装脚本**：
   ```bash
   python install_requirements.py
   ```
   
2. **手动安装（如果自动安装失败）**：
   ```bash
   pip install opencv-python pyautogui pytesseract pillow numpy tkinter
   ```

3. **安装Tesseract OCR**：
   - **Windows**: 从 [官方链接](https://github.com/UB-Mannheim/tesseract/wiki) 下载安装
   - **macOS**: `brew install tesseract`
   - **Linux**: `sudo apt-get install tesseract-ocr tesseract-ocr-chi-sim`

### 第二步：启动程序

**推荐使用GUI版本**（最完整功能）：
```bash
python gui_chess_scanner.py
```

**其他版本**：
```bash
# 基础命令行版本
python chinese_chess_scanner.py

# 高级命令行版本
python advanced_chess_scanner.py
```

## 📖 详细使用教程

### 🎮 GUI版本使用指南

#### 1. 界面布局说明

启动GUI后，你会看到：

```
┌─────────────────────────────────────────────────────────────┐
│                中国象棋智能对弈助手 v3.1                        │
├─────────────────────────────────────────────────────────────┤
│ 控制面板                                                     │
│ [校准棋盘] [单次扫描] [创建模板]                               │
│ [选择扫描区域] [管理区域] 当前区域: 全屏                        │
│ [启动AI助手] [停止AI助手] [获取推荐]                           │
├─────────────────────────────────────────────────────────────┤
│ 棋盘状态 (上方:对手 下方:玩家)    │    AI智能分析              │
│                                 │    胜率: ---%              │
│      [棋盘可视化区域]             │    推荐走法:               │
│                                 │    [推荐走法文本]           │
│                                 │    局面分析:               │
│                                 │    [分析结果文本]           │
├─────────────────────────────────────────────────────────────┤
│ 系统日志                                                     │
│ [日志信息显示区域]                                            │
└─────────────────────────────────────────────────────────────┘
```

#### 2. 基础功能使用

##### 📍 棋盘校准（首次使用必须）
1. 点击"校准棋盘"按钮
2. 按提示将鼠标移到棋盘左上角，按回车
3. 将鼠标移到棋盘右下角，按回车
4. 看到"校准完成"提示

##### 🔍 单次扫描测试
1. 点击"单次扫描"按钮
2. 程序会扫描当前棋盘状态
3. 在左侧棋盘区域查看识别结果
4. 系统日志显示扫描详情

##### 🤖 启动AI助手（核心功能）
1. 确保已完成棋盘校准
2. 点击"启动AI助手"按钮
3. 程序开始持续监控对手走法
4. 右侧显示实时胜率和推荐走法

#### 3. 高级功能使用

##### 🎯 自定义扫描区域（多棋盘支持）

**使用场景**：同时打开多个象棋软件或网站时使用

1. **选择区域**：
   - 点击"选择扫描区域"按钮
   - 屏幕变为全屏选择模式
   - 拖拽鼠标框选目标棋盘区域
   - 按Enter确认，Esc取消

2. **保存区域**：
   - 选择完成后会询问是否保存
   - 输入区域名称（如"腾讯象棋"、"联众象棋"）
   - 保存后可重复使用

3. **管理区域**：
   - 点击"管理区域"打开管理界面
   - 可以加载、预览、删除已保存区域
   - 支持在不同区域间快速切换

##### 🎨 创建棋子模板

**使用场景**：识别率不高时，为特定界面创建自定义模板

1. 点击"创建模板"按钮
2. 输入棋子名称（如"red_king"）
3. 将鼠标移到该棋子上方，按回车
4. 程序自动截取并保存模板

#### 4. AI分析面板详解

##### 胜率显示
- **绿色（≥60%）**：优势明显
- **橙色（40-60%）**：局面均衡  
- **红色（<40%）**：处于劣势

##### 推荐走法
- 显示前3个最佳走法
- 每个走法包含：
  - 走法描述（如"车四进一"）
  - 预期胜率变化
  - AI推荐理由

##### 局面分析
- **对手走法**：显示检测到的对手最新走法
- **威胁提醒**：标示当前面临的威胁
- **机会提示**：指出可以利用的机会
- **游戏状态**：整体局面评估

### 🧪 测试和调试

#### 区域选择测试
```bash
python test_region_selection.py
```

功能包括：
- 同时选择多个棋盘区域
- 批量测试扫描性能
- 区域配置的保存和加载
- 可视化预览选择区域

#### 常见问题排查

1. **识别率低**：
   - 重新校准棋盘位置
   - 调整屏幕亮度和对比度
   - 创建针对当前界面的自定义模板

2. **AI功能无响应**：
   - 检查是否正确识别到棋子移动
   - 确认棋盘状态显示正常
   - 重启AI助手功能

3. **多棋盘切换问题**：
   - 使用"管理区域"功能检查保存的区域
   - 预览区域确认边界正确
   - 重新选择有问题的区域

## 🎯 使用流程建议

### 新手第一次使用
```
安装环境 → 启动GUI → 校准棋盘 → 单次扫描测试 → 启动AI助手
```

### 多棋盘用户
```
基础设置 → 选择扫描区域 → 保存区域配置 → 在不同区域间切换使用
```

### 高级用户
```
创建自定义模板 → 调整识别参数 → 使用测试工具验证 → 批量管理区域配置
```

## 💡 使用技巧

### 提高识别准确性
- 选择光线良好的环境
- 确保棋盘界面清晰无遮挡
- 避免背景有干扰元素
- 为常用界面创建专用模板

### 优化AI分析效果
- 保持棋盘状态识别准确
- 等待AI充分分析后再参考建议
- 结合自己的判断使用推荐走法
- 定期重新校准以保持准确性

### 多棋盘管理技巧
- 为每个平台命名区域便于识别
- 定期预览区域确保边界正确
- 保存常用配置避免重复设置
- 使用测试工具验证区域效果

## ⚠️ 注意事项

### 使用规范
- 本程序仅供学习和练习使用
- 请遵守各象棋平台的用户协议
- 建议在练习模式下使用
- 不建议在正式比赛中使用

### 技术限制
- 识别准确性依赖屏幕显示质量
- AI分析仅供参考，不保证绝对正确
- 不同界面可能需要重新校准
- 复杂光影条件下识别率可能下降

### 性能建议
- 关闭不必要的后台程序
- 调整扫描间隔平衡性能和响应速度
- 定期清理临时文件和日志
- 监控内存使用避免系统卡顿

## 🆘 故障排除

### 环境问题
```bash
# 检查Python版本（需要3.7+）
python --version

# 检查依赖安装
python -c "import cv2, pyautogui, pytesseract; print('Dependencies OK')"

# 验证Tesseract安装
python -c "import pytesseract; print(pytesseract.get_tesseract_version())"
```

### 功能问题
- **无法启动**：检查Python环境和依赖安装
- **识别失败**：重新校准或创建模板
- **AI无响应**：确认棋盘状态识别正常
- **区域选择问题**：检查屏幕权限设置

### 获取帮助
- 查看系统日志了解详细错误信息
- 使用测试脚本验证各模块功能
- 检查配置文件是否正确生成
- 参考CLAUDE.md了解技术细节

---

🎉 **祝你使用愉快！通过这个智能助手提升你的象棋水平！**